{"version":3,"file":"js/252.bd785cc3.js","mappings":"qJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,aAAa,CAACE,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,YAAYC,MAAM,CAAC,cAAc,GAAG,YAAcP,EAAIQ,YAAY,MAAQR,EAAIS,OAAOC,GAAG,CAAC,MAAQV,EAAIW,aAAaC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAACb,EAAG,MAAM,CAACQ,GAAG,CAAC,MAAQ,SAASM,GAAQ,OAAOhB,EAAIiB,UAAUjB,EAAIkB,aAAa,IAAI,CAAClB,EAAImB,GAAG,QAAQ,EAAEC,OAAM,MACzY,EACIC,EAAkB,GCDtB,GACAhB,KAAA,iBACAiB,IAAAA,GACA,QACA,EACAC,MAAA,CAEAd,MAAA,CACAe,KAAAC,OACAC,UAAA,GAEAT,OAAA,CACAO,KAAAG,SACAD,UAAA,GAEAlB,YAAA,CACAgB,KAAAC,OACAG,QAAA,cAEAV,aAAA,CACAM,KAAAK,MACAD,QAAAA,IAAA,KAGAE,QAAA,CACAnB,WAAAA,CAAAoB,GAEA,KAAAC,MAAA,QAAAD,EACA,IC7B6P,I,UCQzPE,GAAY,OACd,EACAlC,EACAsB,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB,O,oECnBhC,IAAIlC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACgC,YAAY,UAAU,CAAChC,EAAG,cAAc,CAACK,MAAM,CAAC,MAAQ,OAAO,aAAa,IAAIG,GAAG,CAAC,aAAa,SAASM,GAAQ,OAAOhB,EAAImC,QAAQC,IAAI,EAAE,KAAKlC,EAAG,iBAAiB,CAACK,MAAM,CAAC,UAAUP,EAAIqC,SAAS,iBAAiB,CAACrC,EAAIsC,cAAcC,MAAM,CAAC9B,MAAOT,EAAIsC,YAAaE,SAAS,SAAUC,GAAMzC,EAAIsC,YAAYG,CAAG,EAAEC,WAAW,iBAAiBxC,EAAG,MAAM,CAACgC,YAAY,kBAAkB,CAAChC,EAAG,MAAM,CAACgC,YAAY,SAAS,CAAChC,EAAG,OAAO,CAACF,EAAImB,GAAG,UAAUjB,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,WAAW,KAAO,MAAMG,GAAG,CAAC,MAAQV,EAAI2C,iBAAiB,GAAGzC,EAAG,MAAM,CAACgC,YAAY,QAAQlC,EAAI4C,GAAI5C,EAAI6C,SAAS,SAASC,GAAM,OAAO5C,EAAG,MAAM,CAACY,IAAIgC,EAAKZ,YAAY,YAAYxB,GAAG,CAAC,MAAQ,SAASM,GAAQ,OAAOhB,EAAIqC,SAASS,EAAK,IAAI,CAAC9C,EAAImB,GAAGnB,EAAI+C,GAAGD,KAAQ,IAAG,MAAM,EACzyB,EACIzB,EAAkB,G,oBCEtB,GACAhB,KAAA,SACA2C,WAAA,CAAAC,eAAAA,EAAAA,GACA3B,IAAAA,GACA,OACAgB,YAAA,GAGAO,QAAA,KAAAK,OAAAC,QAAAC,cAEA,EACAtB,QAAA,CAEAO,QAAAA,CAAAvB,GAEA,IAAAA,EAAAuC,OAAA,YAAAC,OAAA,UAGA,KAAAnB,QAAAoB,KAAA,sBAAAzC,IACA,EACA6B,YAAAA,GACA,KAAAO,OAAAM,OAAA,sBACA,IC1B8P,I,UCQ1PvB,GAAY,OACd,EACAlC,EACAsB,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB,O","sources":["webpack://hm-shopping/./src/components/BtnSearchInput.vue","webpack://hm-shopping/src/components/BtnSearchInput.vue","webpack://hm-shopping/./src/components/BtnSearchInput.vue?7daa","webpack://hm-shopping/./src/components/BtnSearchInput.vue?2be7","webpack://hm-shopping/./src/views/Search/Search.vue","webpack://hm-shopping/src/views/Search/Search.vue","webpack://hm-shopping/./src/views/Search/Search.vue?aef8","webpack://hm-shopping/./src/views/Search/Search.vue?3e52"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-search',{directives:[{name:\"focus\",rawName:\"v-focus\"}],attrs:{\"show-action\":\"\",\"placeholder\":_vm.placeholder,\"value\":_vm.value},on:{\"input\":_vm.handleInput},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('div',{on:{\"click\":function($event){return _vm.btnFun(..._vm.btnFunParams)}}},[_vm._v(\"搜索\")])]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nexport default {\r\n  name: \"BtnSearchInput\",\r\n  data() {\r\n    return {}\r\n  },\r\n  props: {\r\n    // 只读，不能修改，接收从父组件传递过来的value值\r\n    value: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    btnFun: {\r\n      type: Function,\r\n      required: true\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请在此输入搜索关键词\"\r\n    },\r\n    btnFunParams: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n  },\r\n  methods: {\r\n    handleInput(van_search_value) {\r\n      // 触发自定义绑定在自己身上的input事件，并且把从van-search输入框收到的value值传递给父组件\r\n      this.$emit('input', van_search_value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <!--传递父组件的value给van-search组件，并接收来自van_search组件的van_search_value给父组件-->\r\n  <!--这里不能使用v-model='value'，因为这相当于直接修改只读的value-->\r\n  <!--当van-search组件触发自定义input事件的时候，调用handleInput方法，handleInput方法再去触发SearchInput组件的自定义input事件-->\r\n  <!--把来自van-search组件的van_search_value传递给SearchInput组件的父组件，相当于实现了一次孙传父-->\r\n  <van-search\r\n      show-action\r\n      :placeholder=\"placeholder\"\r\n      :value=\"value\"\r\n      @input=\"handleInput\"\r\n      v-focus\r\n  >\r\n    <template #action>\r\n      <div @click=\"btnFun(...btnFunParams)\">搜索</div>\r\n    </template>\r\n  </van-search>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n// ::v-deep 贯穿 scoped 作用到子元素\r\n.van-search::v-deep .van-search__action {\r\n  background-color: #c21401;\r\n  color: #fff;\r\n  padding: 0 20px;\r\n  border-radius: 0 5px 5px 0;\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BtnSearchInput.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BtnSearchInput.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BtnSearchInput.vue?vue&type=template&id=288b1bce&scoped=true\"\nimport script from \"./BtnSearchInput.vue?vue&type=script&lang=js\"\nexport * from \"./BtnSearchInput.vue?vue&type=script&lang=js\"\nimport style0 from \"./BtnSearchInput.vue?vue&type=style&index=0&id=288b1bce&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"288b1bce\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品搜索\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('BtnSearchInput',{attrs:{\"btn-fun\":_vm.goSearch,\"btn-fun-params\":[_vm.searchInput]},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}}),_c('div',{staticClass:\"search-history\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"最近搜索\")]),_c('van-icon',{attrs:{\"name\":\"delete-o\",\"size\":\"16\"},on:{\"click\":_vm.clearHistory}})],1),_c('div',{staticClass:\"list\"},_vm._l((_vm.history),function(item){return _c('div',{key:item,staticClass:\"list-item\",on:{\"click\":function($event){return _vm.goSearch(item)}}},[_vm._v(_vm._s(item))])}),0)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\n\r\nimport BtnSearchInput from \"@/components/BtnSearchInput.vue\";\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  components: {BtnSearchInput},\r\n  data() {\r\n    return {\r\n      searchInput: '',\r\n      // 初始加载vuex定义的全局历史记录，而且在Search组件期间，不会修改history，\r\n      // 所以不用使用计算属性去跟踪vuex仓库中全局history的变化\r\n      history: this.$store.getters.globalHistory,\r\n    }\r\n  },\r\n  methods: {\r\n    // key是输入框内容或者点击的历史记录\r\n    goSearch(key) {\r\n      // 输入框不能为空\r\n      if (!key.trim()) return this.$toast('输入不得为空')\r\n\r\n      // 跳转到搜索列表页\r\n      this.$router.push(`/searchList?search=${key}`)\r\n    },\r\n    clearHistory() {\r\n      this.$store.commit('user/REMOVE_HISTORY') // 把本地存储的历史记录也清空\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"search\">\r\n    <van-nav-bar title=\"商品搜索\" left-arrow @click-left=\"$router.go(-1)\"/>\r\n\r\n    <!--搜索框-->\r\n    <!-- btnFun 方法传入的参数是 btnFunParams ,是一个数组,而且 v-model 必传，这样才可以绑定数据和 input 框-->\r\n    <BtnSearchInput :btn-fun=\"goSearch\" :btn-fun-params=\"[searchInput]\" v-model=\"searchInput\"></BtnSearchInput>\r\n\r\n    <!-- 搜索历史 -->\r\n    <div class=\"search-history\">\r\n      <div class=\"title\">\r\n        <span>最近搜索</span>\r\n        <van-icon @click=\"clearHistory\" name=\"delete-o\" size=\"16\"/>\r\n      </div>\r\n      <div class=\"list\">\r\n        <div v-for=\"item in history\" :key=\"item\" class=\"list-item\" @click=\"goSearch(item)\">{{ item }}</div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.search {\r\n\r\n  .title {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    font-size: 14px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 15px;\r\n  }\r\n\r\n  .list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 10px;\r\n    gap: 5%;\r\n  }\r\n\r\n  .list-item {\r\n    width: 30%;\r\n    text-align: center;\r\n    padding: 7px;\r\n    line-height: 15px;\r\n    border-radius: 50px;\r\n    background-color: #fff;\r\n    font-size: 13px;\r\n    border: 1px solid #efefef;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=9e842f70&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=9e842f70&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9e842f70\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","attrs","placeholder","value","on","handleInput","scopedSlots","_u","key","fn","$event","btnFun","btnFunParams","_v","proxy","staticRenderFns","data","props","type","String","required","Function","default","Array","methods","van_search_value","$emit","component","staticClass","$router","go","goSearch","searchInput","model","callback","$$v","expression","clearHistory","_l","history","item","_s","components","BtnSearchInput","$store","getters","globalHistory","trim","$toast","push","commit"],"sourceRoot":""}